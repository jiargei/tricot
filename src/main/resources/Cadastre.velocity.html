<!DOCTYPE html>
<!--
Copyright 2017 jurgen.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<html>
    <head>
        <title>Plane Similarity Result</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <style>
            .card-header {background-color: activeborder; padding: 0px 5px 0px 0px;}
			.card-title { margin: 15px 0px 0px 0px; padding: 5px 0px 5px 5px}
            .text-white {color: white; }
            .text-danger {color: crimson; }
            .text-right {text-align: right; }
            .text-success {color: limegreen; }
            .text-bold {font-weight: bold; }
            .bg-danger {background-color: crimson; }
            .bg-info {background-color: cornflowerblue; }
            .bg-success {background-color: limegreen;  }
            .container {width: 920px ; margin:0 auto; }
            .table {width: 100%; padding: 10px; border-collapse: collapse; border-spacing: 5px; }
            .row {margin-top: 30px; }
            .top-link {text-align: right; width: 100%}
            .tb-20 {width: 20%; }
            .tb-40 {width: 40%; }
            
 			body { font-family: sans-serif; }
            table {border-style: solid; }
            td {padding-right: 5px; padding-left: 5px; }
            th {text-align: left; }
        </style>
        <!-- Bootstrap CSS -->
        <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
-->    </head>
    <body>
        <div class="container">
            
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title bg-info text-white">Table of Contents</h2>
                        </div>
                        <div class="card-block">
                            <ul>
                                <li><a href="#global-trafo">Global Transformation Parameter Set</a></li>
                                <li><a href="#global-projection">Global Projection Parameter Set</a></li>
                                <li><a href="#local-trafo">Local Transformation Parameter Set</a></li>
                                <li><a href="#trafo-results">Transformation Results</a>
                                    #if( $fullResult )
                                    <ul>
                                        #foreach( $c in $fullResult )
                                        <li><a href="#result-$c.getName()">$c.getName()#if ($c.getImp().getCode() != "")<span class="text-danger"> ($c.getImp().getCode())</span>#else <span class="text-success"> (OK)</span>#end</a></li>
                                        #end
                                    </ul>
                                    #end
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header bg-info text-white">                            
                            <h2 class="card-title" id="global-trafo">Global Transformation Parameter Set</h2>
                        </div>
                        <div class="card-block">
                            <table class="table" border="1">
                                <thead>
                                    <tr>
                                        <th class="tb-40">Attribute</th>
                                        <th class="tb-40">Value</th>
                                        <th class="tb-20">Unit</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th>Method</th>
                                        <td class="text-right">SevenParameter MGI -> ETRS89</td>
                                        <td>EPSG::1618</td>
                                    </tr>
                                    <tr>
                                        <th>Translation X</th>
                                        <td class="text-right">577.326</td>
                                        <td>m</td>
                                    </tr>
                                    <tr>
                                        <th>Translation Y</th>
                                        <td class="text-right">90.129</td>
                                        <td>m</td>
                                    </tr>
                                    <tr>
                                        <th>Translation Z</th>
                                        <td class="text-right">463.919</td>
                                        <td>m</td>
                                    </tr>
                                    <tr>
                                        <th>Rotation X</th>
                                        <td class="text-right">5.137</td>
                                        <td>deg_sec</td>
                                    </tr>
                                    <tr>
                                        <th>Rotation Y</th>
                                        <td class="text-right">1.474</td>
                                        <td>deg_sec</td>
                                    </tr>
                                    <tr>
                                        <th>Rotation Z</th>
                                        <td class="text-right">5.297</td>
                                        <td>deg_sec</td>
                                    </tr>
                                    <tr>
                                        <th>Scale</th>
                                        <td class="text-right">2.4232</td>
                                        <td>ppm</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="card-footer">
                            <p><a class="top-link" href="#top">Top</a></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header bg-info text-white">
                            <h2 class="card-title" id="global-projection">Projection Parameter Set</h2>                            
                        </div>
                        <div class="card-block">
                            <table class="table" border="1">
                                <thead>
                                    <tr>
                                        <th class="tb-40">Attribute</th>
                                        <th class="tb-40">Value</th>
                                        <th class="tb-20">Unit</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th>Method</th><td class="text-right">Transverse Mercator</td><td>EPSG::1800[456]</td>                                      
                                    </tr>
                                    <tr>
                                        <th>Latitude of Origin</th><td class="text-right">0.000</td><td>[NS]dd mm ss</td>
                                    </tr>
                                    <tr>
                                        <th>Longitude of Origin</th><td class="text-right">E 1[036] 20 00</td><td>[EW] dd mm ss</td>
                                    </tr>
                                    <tr>
                                        <th>Scale</th><td class="text-right">1.000</td><td></td>
                                    </tr>
                                    <tr>
                                        <th>False Easting</th><td class="text-right">0.000</td><td>m</td>
                                    </tr>
                                    <tr>
                                        <th>False Northing</th><td class="text-right">-5000000.000</td><td>m</td>
                                    </tr>
                                    <tr>
                                        <th>Ellipsoid</th><td>Bessel 1841</td><td>EPSG::7009</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="card-footer">
                            <p><a class="top-link" href="#top">Top</a></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header bg-info text-white">
                            <h2 class="card-title" id="local-trafo">Local Transformation Parameter Set</h2>
                        </div>
                        <div class="card-block">
                            <h4 class="card-title">Parameters</h4>
                            <table class="table" border="1">
                                <tbody>
                                    <tr>
                                        <th class="tb-40">Source Centroid East</th><td class="text-right tb-40">$str.format("%.3f", $centroidSource.getEast())</td><td class="tb-20">m</td>
                                    </tr>
                                    <tr>
                                        <th>Source Centroid North</th><td class="text-right">$str.format("%.3f", $centroidSource.getNorth())</td><td>m</td>
                                    </tr>
                                    <tr>
                                        <th>Target Centroid East</th><td class="text-right">$str.format("%.3f", $centroidTarget.getEast())</td><td>m</td>
                                    </tr>
                                    <tr>
                                        <th>Target Centroid North</th><td class="text-right">$str.format("%.3f", $centroidTarget.getNorth())</td><td>m</td>
                                    </tr>
                                    <tr>
                                        <th>Translation East</th><td class="text-right">$str.format("%.3f", $centroidDiff.getEast())</td><td>m</td>
                                    </tr>
                                    <tr>
                                        <th>Translation North</th><td class="text-right">$str.format("%.3f", $centroidDiff.getNorth())</td><td>m</td>
                                    </tr>
                                    
                                    <tr>
                                        <th>Rotation</th><td class="text-right">$str.format("%.3f", $localTrafoPar[2])</td><td>deg_sec</td>
                                    </tr>
                                    <tr>
                                        <th>Scale</th><td class="text-right">$str.format("%.4f", $localTrafoPar[3])</td><td>ppm</td>
                                    </tr>
                                </tbody>
                            </table>
                            <h4 class="card-title">Statistic</h4>
                            <table class="table" border="1">
                                <tbody>
                                    <tr>
                                        <th class="tb-40">Number of identical Points</th><td class="tb-40 text-right">$str.format("%.0f", $localTrafoPar[4])</td><td class="tb-20"/>
                                    </tr>
                                    <tr>
                                        <th>Min Residual East</th><td class="text-right">$str.format("%.3f", $localTrafoMin.getEast())</td><td>m</td>
                                    </tr>
                                    <tr>
                                        <th>Min Residual North</th><td class="text-right">$str.format("%.3f", $localTrafoMin.getNorth())</td><td>m</td>
                                    </tr>
                                    <tr>
                                        <th>Max Residual East</th><td class="text-right">$str.format("%.3f", $localTrafoMax.getEast())</td><td>m</td>
                                    </tr>
                                    <tr>
                                        <th>Max Residual North</th><td class="text-right">$str.format("%.3f", $localTrafoMax.getNorth())</td><td>m</td>
                                    </tr>
                                    <tr>
                                        <th>Avg Residual East</th><td class="text-right">$str.format("%.3f", $localTrafoAvg.getEast())</td><td>m</td>
                                    </tr>
                                    <tr>
                                        <th>Avg Residual North</th><td class="text-right">$str.format("%.3f", $localTrafoAvg.getNorth())</td><td>m</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="card-footer">
                            <p><a class="top-link" href="#top">Top</a></p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header bg-info text-white">
                            <h2 class="card-title" id="trafo-results">Transformation Results</h2>
                        </div>
                        #if(!$fullResult)
                        <div class="card-block">
                            <p class="card-text">No Transformation point in Data set</p>
                        </div>
                        #else
                        #foreach($c in $fullResult)
                        <div class="card-block">
                            #if($c.usage)
                                #if($c.getImp().getCode() != "")
                                    #set($h4Color = "bg-danger")
                                #else
                                    #set($h4Color = "bg-success")
                                #end
                            <h4 class="card-title $h4Color text-white" id="result-$c.getName()">$c.getName()</h4>
                            #else
                            <h4 class="card-title $h4Color text-white" id="result-$c.getName()"><s>$c.getName()</s></h4>
                            #end
                            <table class="table" border="1">
                                <thead>
                                    <tr>
                                        <th class="tb-40">System</th>
                                        <th>Param1</th>
                                        <th>Value1</th>
                                        <th>Param2</th>
                                        <th>Value2</th>
                                        <th>Param3</th>
                                        <th>Value3</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>ECEF</td>
                                        <td>X</td><td class="text-right">$str.format("%.3f", $c.getEcef().getX())</td>
                                        <td>Y</td><td class="text-right">$str.format("%.3f", $c.getEcef().getY())</td>
                                        <td>Z</td><td class="text-right">$str.format("%.3f", $c.getEcef().getZ())</td>
                                    </tr>
                                    <tr>
                                        <td>MGI</td>
                                        <td>X</td><td class="text-right">$str.format("%.3f", $c.getMgiXYZ().getX())</td>
                                        <td>Y</td><td class="text-right">$str.format("%.3f", $c.getMgiXYZ().getY())</td>
                                        <td>Z</td><td class="text-right">$str.format("%.3f", $c.getMgiXYZ().getZ())</td>
                                    </tr>
                                    <tr>
                                        <td>Local Real (BEV)</td>
                                        <td>East</td><td class="text-right">$str.format("%.3f", $c.getReal().getEast())</td>
                                        <td>North</td><td class="text-right">$str.format("%.3f", $c.getReal().getNorth())</td>
                                        <td>Height</td><td class="text-right">$str.format("%.3f", $c.getReal().getHeight())</td>
                                    </tr>
                                    <tr>
                                        <td>Local Intermediate (GlobalTrafo + Projection)</td>
                                        <td>East</td><td class="text-right">$str.format("%.3f", $c.getMedYX().getEast())</td>
                                        <td>North</td><td class="text-right">$str.format("%.3f", $c.getMedYX().getNorth())</td>
                                        <td>Height</td><td class="text-right">$str.format("%.3f", $c.getMedYX().getHeight())</td>
                                    </tr>
                                    <tr>
                                        <td>Local Calc (GlobalTrafo + Projection + LocalTrafo)</td>
                                        <td>East</td><td class="text-right">$str.format("%.3f", $c.getCalc().getEast())</td>
                                        <td>North</td><td class="text-right">$str.format("%.3f", $c.getCalc().getNorth())</td>
                                        <td /><td class="text-right"></td>
                                    </tr>
                                    <tr>
                                        <td>Residuals (Calc - Real)</td>
                                        <td>East</td><td class="text-right text-bold">$str.format("%.3f", $c.getImp().getEast())</td>
                                        <td>North</td><td class="text-right text-bold">$str.format("%.3f", $c.getImp().getNorth())</td>
                                        <td>Length</td><td class="text-right text-bold">$str.format("%.3f", $c.getImp().getHorizontalLength())</td>
                                    </tr>
                                </tbody>
                            </table>
                            #if($c.getImp().getCode() != "")
                            <p class="card-text bg-danger text-white">$c.getImp().getCode()</p>                            
                            #end
                        </div>  <!-- card-block -->
                        #end
                        #end
                        <div class="card-footer">
                            <p><a class="top-link" href="#top">Top</a></p>
                        </div>
                    </div>
                </div>
            </div>
            
            
        </div>
		<div class="footer">
			<hr />
			<p>Copyright 2018 by <a href="mailto:contact@messfuchs.at">J&uuml;rgen Fredriksson</a></p>
		</div>
	</body>
</html>
